% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/convolution.R
\name{brmid.brmsid_convolution}
\alias{brmid.brmsid_convolution}
\title{Delay Convolution Model}
\usage{
\method{brmid}{brmsid_convolution}(
  formula = ~1,
  cmean = ~1,
  csd = ~1,
  family = negbinomial(),
  data,
  priors,
  custom_stancode,
  use_default_formula = TRUE,
  dry = FALSE,
  ...
)
}
\arguments{
\item{formula}{A model formula}

\item{cmean}{Formula for the convolution mean. Defaults to intercept
only.}

\item{csd}{Formula for the convolution standard deviation. Defaults to
intercept only.}

\item{data}{A data.frame as produced by \code{prepare} that must contain the date,
location (as loc), primary (the data that the outcome is a convolution of)
and at least the outcome as specifed in \code{formula}.}

\item{...}{Additional parameters passed to \code{brms::brm}.}
}
\value{
A "brmsfit" object or stan code (if \code{dry = TRUE}).
}
\description{
A model that assumes that a secondary observations can be
predicted using a convolution of a primary observation multipled by some
scaling factor. An example use case of this model is to estimate the
case fatality rate (with the primary observation being cases and the
secondary observation being deaths) and then explore factors that influence
it.
}
\examples{
# define some example data
library(data.table)
dt <- data.table(
   region = "France", cases = seq(10, 500, by = 10),
   date = seq(as.Date("2020-10-01"), by = "days", length.out = 50)
   )
dt[, deaths := as.integer(shift(cases, 5) * 0.1)]
dt[is.na(deaths), deaths := 0]

dt <- prepare(
  dt, model = "convolution", location = "region", 
  primary = "cases", secondary = "deaths",
  )
  
  
brmid(data = dt, dry = TRUE)
}
\author{
Sam Abbott
}
